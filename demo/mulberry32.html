<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Mulberry32 Spectral</title>
  <style>
    body {
      text-align: center;
      margin: 0.5rem;
    }

    canvas {
      image-rendering: pixelated;
      border: 1px solid #000;
      width: calc(100vmin - 1rem - 2px);
      height: calc(100vmin - 1rem - 2px);
    }
  </style>
</head>

<body>
  <canvas id="canvas" width="400" height="400"></canvas>
  <script>
    function mulberry32(seed) {
      let state = seed >>> 0

      return {
        next() {
          let t = (state + 0x6d2b79f5) | 0
          state = t
          t = Math.imul(t ^ (t >>> 15), t | 1)
          t ^= t + Math.imul(t ^ (t >>> 7), t | 61)
          return ((t ^ (t >>> 14)) >>> 0) / 4294967296
        },
      }
    }

    const canvas = document.getElementById('canvas')
    const ctx = canvas.getContext('2d')
    const width = canvas.width
    const height = canvas.height

    const prng = mulberry32(Math.random() * 2 ** 32).next
    const imageData = ctx.createImageData(width, height)
    const data = imageData.data

    for (let y = 0; y < height; y++) {
      for (let x = 0; x < width; x++) {
        const i = (y * width + x) * 4
        const gray = ~~(prng() * 256) // 0-255 grayscale
        data[i] = gray // R
        data[i + 1] = gray // G
        data[i + 2] = gray // B
        data[i + 3] = 255 // alpha
      }
    }

    ctx.putImageData(imageData, 0, 0)
  </script>
</body>

</html>