var q=Object.defineProperty;var z=r=>{throw TypeError(r)};var j=(r,t,i)=>t in r?q(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var Y=(r,t,i)=>j(r,typeof t!="symbol"?t+"":t,i),F=(r,t,i)=>t.has(r)||z("Cannot "+i);var D=(r,t,i)=>t.has(r)?z("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,i);var l=(r,t,i)=>(F(r,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();var e,S,O,T,I,k,R,N,A,V,W,C;const m=class m{constructor(t,i={}){D(this,e);if(t instanceof HTMLCanvasElement)this.canvas=t;else{if(typeof t!="string")throw new TypeError("selector is not a string and neither a HTMLCanvasElement itself");if(this.canvas=document.querySelector(t),!(this.canvas instanceof HTMLCanvasElement))throw new Error("selector does not point to a canvas")}this.canvas.instance=this,this.canvas.inViewbox=!0,this.ctx=this.canvas.getContext("2d"),this.enableAnimating=!1,this.animating=!1,this.particles=[],this.setOptions(i),m.canvasIntersectionObserver.observe(this.canvas),this.resizeCanvas=this.resizeCanvas.bind(this),this.updateMousePos=this.updateMousePos.bind(this),window.addEventListener("resize",this.resizeCanvas),this.resizeCanvas(),window.addEventListener("mousemove",this.updateMousePos),window.addEventListener("scroll",this.updateMousePos)}resizeCanvas(){this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight,this.mouseX=1/0,this.mouseY=1/0,this.updateCount=1/0,this.width=this.canvas.width+this.options.particles.connectDist*2,this.height=this.canvas.height+this.options.particles.connectDist*2,this.offX=(this.canvas.width-this.width)/2,this.offY=(this.canvas.height-this.height)/2,this.options.particles.regenerateOnResize||this.particles.length===0?this.newParticles():this.matchParticleCount(),l(this,e,O).call(this)}updateMousePos(t){if(!this.enableAnimating)return;t instanceof MouseEvent&&(this.clientX=t.clientX,this.clientY=t.clientY);const{left:i,top:n}=this.canvas.getBoundingClientRect();this.mouseX=this.clientX-i,this.mouseY=this.clientY-n}newParticles(){l(this,e,S).call(this),this.particles=[];for(let t=0;t<this.particleCount;t++)this.createParticle()}matchParticleCount(){for(l(this,e,S).call(this),this.particles=this.particles.slice(0,this.particleCount);this.particleCount>this.particles.length;)this.createParticle()}createParticle(t,i,n,s,o){o=o||.5+Math.random()**5*2*this.options.particles.relSize,this.particles.push({posX:t-this.offX||Math.random()*this.width,posY:i-this.offY||Math.random()*this.height,x:t,y:i,velX:0,velY:0,offX:0,offY:0,dir:n||Math.random()*2*Math.PI,speed:s||(.5+Math.random()*.5)*this.options.particles.relSpeed,size:o}),l(this,e,O).call(this)}start(t){return!this.animating&&(!(t!=null&&t.auto)||this.enableAnimating)&&(this.enableAnimating=!0,this.animating=!0,requestAnimationFrame(()=>l(this,e,C).call(this))),!this.canvas.inViewbox&&this.options.animation.startOnEnter&&(this.animating=!1),this}stop(t){return t!=null&&t.auto||(this.enableAnimating=!1),this.animating=!1,(t==null?void 0:t.clear)!==!1&&(this.canvas.width=this.canvas.width),!0}destroy(){var t;this.stop(),m.canvasIntersectionObserver.unobserve(this.canvas),window.removeEventListener("resize",this.resizeCanvas),window.removeEventListener("mousemove",this.updateMousePos),window.removeEventListener("scroll",this.updateMousePos),(t=this.canvas)==null||t.remove(),Object.keys(this).forEach(i=>delete this[i])}setOptions(t){var n,s,o,c,p,f,d,h,a,v,x,y,u,g,M,b,w;const i=(P,X)=>isNaN(+P)?X:+P;this.options={background:t.background??!1,framesPerUpdate:i(Math.max(1,parseInt(t.framesPerUpdate)),1),animation:{startOnEnter:!!(((n=t.animation)==null?void 0:n.startOnEnter)??!0),stopOnLeave:!!(((s=t.animation)==null?void 0:s.stopOnLeave)??!0)},mouse:{interactionType:i(parseInt((o=t.mouse)==null?void 0:o.interactionType),1),connectDistMult:i((c=t.mouse)==null?void 0:c.connectDistMult,2/3),distRatio:i((p=t.mouse)==null?void 0:p.distRatio,2/3)},particles:{regenerateOnResize:!!((f=t.particles)!=null&&f.regenerateOnResize),color:((d=t.particles)==null?void 0:d.color)??"black",ppm:i((h=t.particles)==null?void 0:h.ppm,100),max:i((a=t.particles)==null?void 0:a.max,500),maxWork:i(Math.max(0,(v=t.particles)==null?void 0:v.maxWork),1/0),connectDist:i(Math.max(1,(x=t.particles)==null?void 0:x.connectDistance),150),relSpeed:i(Math.max(0,(y=t.particles)==null?void 0:y.relSpeed),1),relSize:i(Math.max(0,(u=t.particles)==null?void 0:u.relSize),1),rotationSpeed:i(Math.max(0,((g=t.particles)==null?void 0:g.rotationSpeed)/100),.02)},gravity:{repulsive:i((M=t.gravity)==null?void 0:M.repulsive,0),pulling:i((b=t.gravity)==null?void 0:b.pulling,0),friction:i(Math.max(0,Math.min(1,(w=t.particles)==null?void 0:w.friction)),.8)}},this.setBackground(this.options.background),this.setMouseConnectDistMult(this.options.mouse.connectDistMult),this.setParticleColor(this.options.particles.color)}setBackground(t){if(t!==!1){if(typeof t!="string")throw new TypeError("background is not a string");this.canvas.style.background=this.options.background=t}}setMouseConnectDistMult(t){this.options.mouse.connectDist=this.options.particles.connectDist*(isNaN(t)?2/3:t)}setParticleColor(t){this.ctx.fillStyle=t,this.ctx.fillStyle[0]==="#"?this.options.particles.opacity=255:(this.options.particles.opacity=~~(this.ctx.fillStyle.split(",").at(-1).slice(1,-1)*255),this.ctx.fillStyle=this.ctx.fillStyle.split(",").slice(0,-1).join(",")+", 1)"),this.options.particles.color=this.ctx.fillStyle,this.options.particles.colorWithAlpha=this.options.particles.color+this.options.particles.opacity.toString(16),this.strokeStyleTable=l(this,e,N).call(this,this.options.particles.color)}};e=new WeakSet,S=function(){const t=~~(this.options.particles.ppm*this.width*this.height/1e6);if(this.particleCount=Math.min(this.options.particles.max,t),!isFinite(this.particleCount))throw new RangeError("number of particles must be finite. (options.particles.ppm)")},O=function(){this.particles.map(t=>t.bounds={top:-t.size,right:this.canvas.width+t.size,bottom:this.canvas.height+t.size,left:-t.size})},T=function(){const t=this.options.gravity.repulsive!==0,i=this.options.gravity.pulling!==0;if(t||i){const n=this.particleCount,s=this.options.particles.connectDist*this.options.gravity.repulsive,o=this.options.particles.connectDist*this.options.gravity.pulling,c=this.options.particles.connectDist/2,p=this.options.particles.connectDist*.1;for(let f=0;f<n;f++)for(let d=f+1;d<n;d++){const h=this.particles[f],a=this.particles[d],v=h.posX-a.posX,x=h.posY-a.posY,y=Math.sqrt(v*v+x*x);let u,g;if(y<c){u=Math.atan2(a.posY-h.posY,a.posX-h.posX),g=(1/y)**1.8;const P=Math.min(p,g*s),X=Math.cos(u)*P,E=Math.sin(u)*P;h.velX-=X,h.velY-=E,a.velX+=X,a.velY+=E}if(!i)continue;u===void 0&&(u=Math.atan2(a.posY-h.posY,a.posX-h.posX),g=(1/y)**1.8);const M=Math.min(p,g*o),b=Math.cos(u)*M,w=Math.sin(u)*M;h.velX+=b,h.velY+=w,a.velX-=b,a.velY-=w}}},I=function(){for(let t of this.particles){t.dir=(t.dir+Math.random()*this.options.particles.rotationSpeed*2-this.options.particles.rotationSpeed)%(2*Math.PI),t.velX*=this.options.gravity.friction,t.velY*=this.options.gravity.friction,t.posX=(t.posX+t.velX+Math.sin(t.dir)*t.speed%this.width+this.width)%this.width,t.posY=(t.posY+t.velY+Math.cos(t.dir)*t.speed%this.height+this.height)%this.height;const i=t.posX+this.offX-this.mouseX,n=t.posY+this.offY-this.mouseY;if(this.options.mouse.interactionType!==m.interactionType.NONE){const s=this.options.mouse.connectDist/Math.hypot(i,n);this.options.mouse.distRatio<s?(t.offX+=(s*i-i-t.offX)/4,t.offY+=(s*n-n-t.offY)/4):(t.offX-=t.offX/4,t.offY-=t.offY/4)}t.x=t.posX+t.offX,t.y=t.posY+t.offY,this.options.mouse.interactionType===m.interactionType.MOVE&&(t.posX=t.x,t.posY=t.y),t.x+=this.offX,t.y+=this.offY,t.gridPos=l(this,e,k).call(this,t),t.isVisible=t.gridPos.x===1&&t.gridPos.y===1}},k=function(t){return{x:(t.x>=t.bounds.left)+(t.x>t.bounds.right),y:(t.y>=t.bounds.top)+(t.y>t.bounds.bottom)}},R=function(t,i){return t.isVisible||i.isVisible?!0:!(t.gridPos.x===i.gridPos.x&&t.gridPos.x!==1||t.gridPos.y===i.gridPos.y&&t.gridPos.y!==1)},N=function(t){const i={};for(let n=0;n<256;n++)i[n]=t+n.toString(16).padStart(2,"0");return i},A=function(){for(let t of this.particles)t.isVisible&&(t.size>1?(this.ctx.beginPath(),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.fill(),this.ctx.closePath()):this.ctx.fillRect(t.x-t.size,t.y-t.size,t.size*2,t.size*2))},V=function(){const t=this.particleCount,i=this.options.particles.connectDist>=Math.min(this.canvas.width,this.canvas.height),n=this.options.particles.connectDist*this.options.particles.maxWork;for(let s=0;s<t;s++){let o=0;for(let c=s+1;c<t;c++){const p=this.particles[s],f=this.particles[c];if(!(i||l(this,e,R).call(this,p,f)))continue;const d=p.x-f.x,h=p.y-f.y,a=Math.sqrt(d*d+h*h);if(!(a>this.options.particles.connectDist)){if(a>this.options.particles.connectDist/2){const v=~~(Math.min(this.options.particles.connectDist/a-1,1)*this.options.particles.opacity);this.ctx.strokeStyle=this.strokeStyleTable[v]}else this.ctx.strokeStyle=this.options.particles.colorWithAlpha;if(this.ctx.beginPath(),this.ctx.moveTo(p.x,p.y),this.ctx.lineTo(f.x,f.y),this.ctx.stroke(),(o+=a)>=n)break}}}},W=function(){this.canvas.width=this.canvas.width,this.ctx.fillStyle=this.options.particles.colorWithAlpha,this.ctx.lineWidth=1,l(this,e,A).call(this),l(this,e,V).call(this)},C=function(){this.animating&&(requestAnimationFrame(()=>l(this,e,C).call(this)),++this.updateCount>=this.options.framesPerUpdate&&(this.updateCount=0,l(this,e,T).call(this),l(this,e,I).call(this),l(this,e,W).call(this)))},Y(m,"version","3.6.5"),Y(m,"interactionType",Object.freeze({NONE:0,SHIFT:1,MOVE:2})),Y(m,"canvasIntersectionObserver",new IntersectionObserver(t=>{t.forEach(i=>{var o,c,p;const n=i.target,s=n.instance;(o=s.options)!=null&&o.animation&&((n.inViewbox=i.isIntersecting)?(c=s.options.animation)!=null&&c.startOnEnter&&s.start({auto:!0}):(p=s.options.animation)!=null&&p.stopOnLeave&&s.stop({auto:!0,clear:!1}))})}));let L=m;export{L as C};
